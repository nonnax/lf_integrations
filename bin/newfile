#!/usr/bin/env ruby
# Id$ nonnax 2023-02-19 08:05:34
require 'file/filer'


list={}
list['v']  = "#!/usr/bin/env -S v run\n// Id$ nonnax #{Time.now()}"
list['rb'] = "#!/usr/bin/env ruby\n# Id$ nonnax #{Time.now()}"
list['sh'] = "#!/usr/bin/env bash\n# Id$ nonnax #{Time.now()}"
list['py'] = "#!/usr/bin/env python\n# Id$ nonnax #{Time.now()}"
list['pb'] = "#!/usr/bin/env -S pocket\n# Id$ nonnax #{Time.now()}"
list['lua'] = "#!/usr/bin/env -S lua\n-- Id$ nonnax #{Time.now()}"
list['moon'] = "#!/usr/bin/env -S moon\n-- Id$ nonnax #{Time.now()}"
list['wren'] = "#!/usr/bin/env -S wren\n// Id$ nonnax #{Time.now()}"
list['pk'] = "#!/usr/bin/env -S pocket\n# Id$ nonnax #{Time.now()}"
list['ex'] = "#!/usr/bin/env -S elixir\n# Id$ nonnax #{Time.now()}"
list['exs'] = "#!/usr/bin/env -S elixir\n# Id$ nonnax #{Time.now()}"
list['r'] = "#!/usr/bin/env -S Rscript\n# Id$ nonnax #{Time.now()}"
list['jl'] = "#!/usr/bin/env -S julia\n# Id$ nonnax #{Time.now()}"

def list.valid_ext(ext)
 self[ext.to_s] ? ext : ext
end

dirname=Pathname(Dir.pwd)
ext, = ARGV
ext = list.valid_ext(ext)

fname = [dirname.basename, ext].join('.')

fname = File.backup!(fname) if File.exist?(fname)

f, text = Filer.load(TextFile.new(fname)){}

f.write( String(list[ext]) )
